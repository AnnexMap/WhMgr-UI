<!DOCTYPE html="{{locale}}">
    {{> header}}
    <body>
        {{> navbar}}
        <br>
        <h1 align="center" id="header">{{Subscriptions}}</h1>
        <br>
        <div style="width:90%; margin-left:calc(5%);">
            <div class="card text-center p-1 m-3">
                <div class="card-header bg-dark text-light"><b>Overview</b></div>
                <div class="card-body">
                    <div class="container">
                        <div class="row">
                            <div class="col-lg-3 p-1">
                                <div class="list-group">
                                    <a class="list-group-item">
                                        <h3 class="pull-right"><img src="./img/pokemon.png" width="64" height="64"/></h3>
                                        <h4 class="list-group-item-heading pokemon_count">{{pokemon_count}}</h4>
                                        <p class="list-group-item-text">Pokemon</p>
                                    </a>
                                </div>
                            </div>
                            <div class="col-lg-3 p-1">
                                <div class="list-group">
                                    <a class="list-group-item">
                                        <h3 class="pull-right"><img src="./img/raids.png" width="64" height="64"/></h3>
                                        <h4 class="list-group-item-heading raids_count">{{raids_count}}</h4>
                                        <p class="list-group-item-text">Raids</p>
                                    </a>
                                </div>
                            </div>
                            <div class="col-lg-3 p-1">
                                <div class="list-group">
                                    <a class="list-group-item">
                                        <h3 class="pull-right"><img src="./img/quests.png" width="64" height="64"/></h3>
                                        <h4 class="list-group-item-heading quests_count">{{quests_count}}</h4>
                                        <p class="list-group-item-text">Quests</p>
                                    </a>
                                </div>
                            </div>
                            <div class="col-lg-3 p-1">
                                <div class="list-group">
                                    <a class="list-group-item">
                                        <h3 class="pull-right"><img src="./img/invasions.png" width="64" height="64"/></h3>
                                        <h4 class="list-group-item-heading invasions_count">{{invasions_count}}</h4>
                                        <p class="list-group-item-text">Invasions</p>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <br>
    </body>
    {{> footer}}
</html>

<script type='text/javascript' src='./js/utils.js'></script>
<script type='text/javascript'>
    if ("{{style}}" === 'dark') {
        $('body').css('background-color', 'rgb(33, 37, 41)');
        $('body').css('color', 'rgb(255, 255, 255)');
        $('.modal-content').css('background-color', 'rgb(33, 37, 41)');
        $('.modal-content').css('color', 'rgb(255, 255, 255)');
        $('.card').css('background-color', '#1a1a1a');
        $('.list-group-item').css('background-color', 'rgb(33, 37, 41)');
        $('.list-group-item').css('border-color', 'white');
        //$('.darkInvert').css('filter', 'invert(100%)');
    }

    function refreshData() {
        $.ajax({
            url: "/api/server/" + $('#server_selector').val() + "/user/{{user_id}}?type=subscriptions",
            method: "POST",
            type: "json",
            success: function(result) {
                console.log("Data:", result);
                updateCounter(".pokemon_count", result.data.subscriptions.pokemon);
                updateCounter(".raids_count", result.data.subscriptions.raids);
                updateCounter(".quests_count", result.data.subscriptions.quests);
                updateCounter(".invasions_count", result.data.subscriptions.invasions);
            }
        });
    }

    refreshData();
</script>